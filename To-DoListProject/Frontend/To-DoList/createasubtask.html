<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Create a subtask</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <link href="index.css" rel="stylesheet">
</head>

<body>
    <nav class="navbar-nav">
        <a href="index.html" class="navbar-brand">Home</a>
        <ul class="navbar-nav">
            <li class="nav-item">
                <a href="createatask.html" class="nav-link">Create a task</a>
            </li>
            <li class="nav-item">
                <a href="createasubtask.html" class="nav-link">Create a subtask</a>
            </li>
            <li class="nav-item">
                <a href="tasks.html" class="nav-link">Tasks</a>
            </li>
            <li class="nav-item">
                <a href="gettaskbyid.html" class="nav-link">Show task by id</a>
            </li>
             <li class="nav-item">
                <a href="upgradetask.html" class="nav-link">upgrade task by id</a>
            </li>
        </ul>
    </nav>

<form style="border:1px solid #ccc">
    <div class="container">
      <h1>Create a subtask</h1>
      <p>Please fill in this form to create a subtask.</p>
      <hr>

      <label for="TaskId"><b>TaskID</b></label>
      <input type="number" placeholder="Enter Task ID" name="TaskID" id="taskid"  required>

      <label for="Subtask"><b>Subtask</b></label>
      <input type="text" placeholder="Enter Subtask" name="Task" id="subtask"  required>
  
      <label for="Description"><b>Description</b></label>
      <input type="text" placeholder="Enter Description" name="Description" id="description" required>
  
      <label for="Deadline"><b>Deadline</b></label>
      <input type="text" placeholder="Enter Deadline" name="Priority" id="deadline" required>

      <label for="Priority"><b>Priority</b></label>
      <input type="text" placeholder="Enter Priority Level" name="Priority" id="priority" required>

      <div class="clearfix">
        <button type="button" class="cancelbtn">Cancel</button>
        <button type="submit" id="createasubtask">Create Subtask</button>
      </div>
    </div>

    <script>
     const createSubtaskRequest = () => {

    
    
    let subtask = document.querySelector("#subtask").value
    console.log(subtask);

    let description = document.querySelector("#description").value;
    console.log(description);

    let deadline = document.querySelector("#deadline").value;
    console.log(deadline);

    let priority = document.querySelector("#priority").value;
    console.log(priority);

    let taskid = document.querySelector("#taskid").value
    console.log(taskid);

    const taskCreated =
    {
        
        "subtask": subtask,
        "description": description,
        "deadline": deadline,
        "priority": priority,
        "taskLink": {"id": taskid}
    }

fetch("http://localhost:8080/subtask", {
        method: "POST",
        headers: {
            "Content-type": "application/json"
        },
        body: JSON.stringify(taskCreated)
    })
        .then(res => res.json())
        .then(data => console.log(data))
        .catch(err => console.err(err))

       
}

document.getElementById("createasubtask").addEventListener("click", (event) =>{
    event.preventDefault();
    createSubtaskRequest();
}
)
    </script>
</body>