<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Create a task</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <link href="index.css" rel="stylesheet">
</head>

<body>
    <nav class="navbar-nav">
        <a href="index.html" class="navbar-brand">Home</a>
        <ul class="navbar-nav">
            <li class="nav-item">
                <a href="createatask.html" class="nav-link">Create a task</a>
            </li>
            <li class="nav-item">
                <a href="createasubtask.html" class="nav-link">Create a subtask</a>
            </li>
            <li class="nav-item">
                <a href="tasks.html" class="nav-link">Tasks</a>
            </li>
            <li class="nav-item">
                <a href="gettaskbyid.html" class="nav-link">Show task by id</a>
            </li>
             <li class="nav-item">
                <a href="upgradetask.html" class="nav-link">upgrade task by id</a>
            </li>
        </ul>
    </nav>

<form style="border:1px solid #ccc">
    <div class="container">
      <h1>Update a task</h1>
      <p>Please fill in this form to change a pre-existing task.</p>
      <hr>

      <label for="Id"><b>Id</b></label>
      <input type="number" placeholder="Enter Id" name="Id" id="id"  required>
  

      <label for="Task"><b>Task</b></label>
      <input type="text" placeholder="Enter Task" name="Task" id="task"  required>
  
      <label for="Description"><b>Description</b></label>
      <input type="text" placeholder="Enter Description" name="Description" id="description" required>
  
      <label for="Deadline"><b>Deadline</b></label>
      <input type="text" placeholder="Enter Deadline" name="Priority" id="deadline" required>

      <label for="Priority"><b>Priority</b></label>
      <input type="text" placeholder="Enter Priority Level" name="Priority" id="priority" required>

      <div class="clearfix">
        <button type="button" class="cancelbtn">Cancel</button>
        <button type="submit" onclick= "updateRequest()">Update
    </div>

    <script>
     const updateRequest = () => {
    
    let task = document.querySelector("#task").value
    console.log(task);

    let description = document.querySelector("#description").value;
    console.log(description);

    let deadline = document.querySelector("#deadline").value;
    console.log(deadline);

    let priority = document.querySelector("#priority").value;
    console.log(priority);

  

    const taskUpdated =
    {
      
        "task": task,
        "description": description,
        "deadline": deadline,
        "priority": priority
        
    }
    var taskIdUpdate = document.getElementById('id').value;
fetch(`http://localhost:8080/task/${taskIdUpdate}`, {
        method: "PUT",
        headers: {
            "Content-type": "application/json"
        },
        body: JSON.stringify(taskUpdated)
    })
        .then(res => res.json())
        .then(data => console.log(data))
        .catch(err => console.err(err))
}

    </script>
</body>